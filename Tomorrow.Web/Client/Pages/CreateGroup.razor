@page "/create-group"
@inject HttpClient HttpClient

<h3>Create a group</h3>
<div class="mb-3">
    <EditForm Model="@group" OnValidSubmit="@CreateAsync">
        @if (created)
        {
            <div class="alert alert-success" role="alert">
                Group created successfully!
            </div>
        }
        <DataAnnotationsValidator />
        <ValidationSummary />
        <div class="mb-3">
            <label for="name" class="form-label">Group Name</label>
            <InputText class="form-control" id="name" @bind-Value="@group.Name" />
        </div>
        <button class="btn btn-primary mb-3" type="submit">Submit</button>
    </EditForm>
</div>

@code {
    private Group group = new Group();
    private bool created = false;
    public async Task CreateAsync()
    {
        var response = await HttpClient.PostAsJsonAsync("api/groups", group);
        response.EnsureSuccessStatusCode();
        created = true;
        group = new Group();
        StateHasChanged();
    }
}